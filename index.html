<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‡∏≠‡∏ö‡∏ï.‡∏´‡∏±‡∏ß‡∏ô‡∏≤</title>
    <link
      rel="icon"
      href="https://www.huana-nbp.go.th/index/add_file/qOv0r0dTue83729.png"
      type="image/png"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- Auto Complete -->
    <link
      rel="stylesheet"
      href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"
    />
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-ui.autocomplete.scroll@0.1.9/jquery.ui.autocomplete.scroll.min.js"></script>

    <!-- Font Awesome Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />

    <!-- Style CSS -->
    <style>
      @import url("https://fonts.googleapis.com/css2?family=K2D&family=Kanit&family=Sriracha&display=swap");

      * {
        margin: 0px;
        padding: 0px;
        box-sizing: border-box;
        font-family: "Kanit", sans-serif;
      }

      body {
        font-family: "Kanit", sans-serif;
        color: #444;
        background-color: white;
        padding: 20px;
        border: 2px solid white;
        box-shadow: 0px 8px 10px rgba(0, 0, 0, 0.5);
        font-size: 1.05rem;
        min-height: 100vh;
        display: grid;
        place-items: center;
        background-color: #92a8d1;
        background: url("https://www.i-pic.info/i/BbiN536436.jpg") no-repeat
          center center fixed;
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;
      }

      input#employee {
        font-family: "Kanit", sans-serif;
        width: 282px;
        height: 60px;
        background-color: brown;
        color: yellow;
        margin-block-start: 5px;
        border-radius: 36px;
        font-size: 20px;
      }

      .site-logo {
        content: url("https://www.huana-nbp.go.th/index/add_file/qOv0r0dTue83729.png");
        display: inline-block;
        margin-top: 20px;
        width: auto;
        height: 100px;
      }

      .msgBg {
        background-color: transparent;
      }

      .wrapper {
        background: rgba(221, 255, 255, 0.7);
        width: 350px;
        padding: 20px;
        border: 1px solid #999;
        border-radius: 5px;
        box-shadow: 0px 15px 20px rgba(0, 0, 0, 0.1);
      }

      /** #### digital clock #### **/
      @font-face {
        font-family: "Digital dream Fat";
        src: url("https://semicon.github.io/fonts/DigitaldreamFat.woff2")
            format("woff2"),
          url("https://semicon.github.io/fonts/DigitaldreamFat.woff")
            format("woff");
        font-weight: normal;
        font-style: normal;
        font-display: swap;
      }

      .clock {
        font-family: Digital dream Fat;
        font-size: 28px;
        color: #00f6fa;
        letter-spacing: 3px;
        text-shadow: 1px 1px 2px teal, 0 0 25px green, 0 0 5px #00fbff;
        min-width: 98%;
        background: #444;
        padding: 5px 0px 5px 10px;
        display: inline-block;
        border: 3px solid #ccc;
        border-radius: 2px;
        outline-style: solid;
        outline-color: #999;
      }

      /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏¥‡∏ß */
      .queue-info {
        background-color: rgba(230, 248, 255, 0.8);
        border-radius: 5px;
        padding: 12px;
        margin-top: 10px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .queue-info div {
        margin-bottom: 5px;
      }

      .progress {
        height: 20px;
        border-radius: 10px;
        background-color: #e6e6e6;
        overflow: hidden;
      }

      .progress-bar {
        background-color: #007bff;
        color: white;
        text-align: center;
        line-height: 20px;
        transition: width 0.5s;
      }

      .waiting-number {
        font-size: 28px;
        font-weight: bold;
        color: #ff6600;
        background-color: #fff8e0;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        line-height: 50px;
        text-align: center;
        margin: 0 auto 15px auto;
        border: 2px solid #ffcc00;
      }

      /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏¥‡∏ß */
      .queue-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }

      .queue-modal-content {
        background-color: #fff;
        width: 90%;
        max-width: 400px;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }
    </style>
  </head>

  <!-- Time Tracker HTML Body -->
  <body>
    <div class="wrapper text-center" style="max-width: 350px">
      <div class="site-logo text-center"></div>
      <h5>‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‡∏≠‡∏ö‡∏ï.‡∏´‡∏±‡∏ß‡∏ô‡∏≤</h5>

      <span id="MyClockDisplay" class="clock mt-3" onload="showTime()"></span>

      <form id="myForm">
        <div class="row mt-4">
          <div class="form-group col">
            <label for="employee">‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™</label>
            <input id="employee" class="text-center" />
          </div>
        </div>

        <div class="row mt-4">
          <div class="form-group col">
            <label for="lblinfo"
              ><i class="fas fa-book-reader"></i> ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°/‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°
              ‡∏≠‡∏∑‡πà‡∏ô‡πÜ</label
            >
            <input
              type="search"
              class="form-control form-control-lg"
              id="userinfo"
              name="userinfo"
              list="list"
            />
            <datalist id="list">
              <option value="‡πÑ‡∏õ‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£">‡πÑ‡∏õ‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£</option>
              <option value="‡∏•‡∏≤‡∏Å‡∏¥‡∏à">‡∏•‡∏≤‡∏Å‡∏¥‡∏à</option>
              <option value="‡∏•‡∏≤‡∏õ‡πà‡∏ß‡∏¢">‡∏•‡∏≤‡∏õ‡πà‡∏ß‡∏¢</option>
              <option value="‡∏•‡∏≤‡∏Ñ‡∏•‡∏≠‡∏î">‡∏•‡∏≤‡∏Ñ‡∏•‡∏≠‡∏î</option>
            </datalist>
          </div>
        </div>

        <div class="row mt-4 g-2">
          <div class="col-6">
            <button
              id="clockin"
              type="button"
              class="btn btn-lg btn-primary w-100"
            >
              Clock In
            </button>
          </div>
          <div class="col-6">
            <button
              id="clockout"
              type="button"
              class="btn btn-lg btn-warning w-100"
            >
              Clock Out
            </button>
          </div>
        </div>

        <div class="row mt-4">
          <div class="form-group col">
            <div class="alert" role="alert" id="message"></div>
          </div>
        </div>
      </form>
    </div>

    <!-- JavaScript -->
    <script>
      // URL ‡∏Ç‡∏≠‡∏á‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå Apps Script (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô URL ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£ deploy)
      // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ global
      var scripturl =
        "https://script.google.com/macros/s/AKfycbxfq1tRERboFr2hbsA9P0i66A5Atjbp42M4AP4rSoOFGOo6ZZBxN3GfTOilYnu26VxtWw/exec";
      var owner = "‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏≥‡∏ö‡∏•";
      var profile = null; // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå LINE
      var gps = [0, 0]; // ‡πÄ‡∏Å‡πá‡∏ö‡∏û‡∏¥‡∏Å‡∏±‡∏î GPS
      var geolocation;

      // ‡∏î‡∏∂‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á GPS
      $.when(getlocation()).done(function (res) {
        console.log(res);
        console.log(gps);
      });

      $(document).ready(function () {
        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏°
        $("#clockin").click(() => ClockIn());
        $("#clockout").click(() => ClockOut());

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô LIFF (LINE Frontend Framework)
        if (typeof liff !== "undefined") {
          liff.init({
            liffId: "2001032478-VR5Akj0k",
            withLoginOnExternalBrowser: true,
          });

          liff.ready
            .then(() => {
              try {
                // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
                profile = liff.getDecodedIDToken();

                if (profile) {
                  console.log("üöÄ ~ profile:", profile);
                  console.log("User ID (sub): " + profile.sub);
                  console.log("Display Name (name): " + profile.name);
                  console.log("Email: " + (profile.email || "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•"));
                  console.log(
                    "Picture URL: " + (profile.picture || "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå")
                  );
                } else {
                  console.log("‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå");
                  profile = {
                    name: "Guest User",
                    picture: "https://via.placeholder.com/150",
                  };
                }
              } catch (error) {
                console.error("Error getting LIFF profile:", error);
                profile = {
                  name: "Guest User",
                  picture: "https://via.placeholder.com/150",
                };
              }

              // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ initApp ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡πâ‡∏ß
              initApp();
            })
            .catch((error) => {
              console.error("LIFF initialization error:", error);
              profile = {
                name: "Guest User",
                picture: "https://via.placeholder.com/150",
              };
              initApp();
            });
        } else {
          console.log("LIFF SDK not available. Using default profile");
          profile = {
            name: "Guest User",
            picture: "https://via.placeholder.com/150",
          };
          initApp();
        }

        function initApp() {
          document.getElementById("message").innerText = owner;
          document.getElementById("message").className = "alert msgBg";
          $.ajax({
            method: "POST",
            url: scripturl,
            data: {
              opt: "getdata",
            },
            success: function (dataPerson) {
              console.log(dataPerson);
              $(function () {
                var availableTags = dataPerson;
                $("#employee").autocomplete({
                  maxShowItems: 3,
                  source: availableTags,
                });
              });
            },
            error: function (err) {
              console.error("Error fetching employee data:", err);
              $("#message").html("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ");
              document.getElementById("message").className =
                "alert alert-danger";
            },
          });

          getEmployees();
        }
      });

      // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô
      function getEmployees() {
        $.ajax({
          method: "POST",
          url: scripturl,
          data: {
            opt: "getemployee",
          },
          success: function (ar) {
            var employeeSelect = document.getElementById("employee");

            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏î‡∏¥‡∏°
            $("#employee").empty();

            let option = document.createElement("option");
            option.value = "";
            option.text = "";
            employeeSelect.appendChild(option);

            ar.forEach(function (item, index) {
              let option = document.createElement("option");
              var employee = item[0];
              option.value = item[0];
              option.text = item[0];
              employeeSelect.appendChild(option);
            });
          },
          error: function (err) {
            console.error("Error fetching employees list:", err);
          },
        });
      }

      // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏¥‡∏ß
      function checkQueueStatus(employeeName) {
        return new Promise((resolve, reject) => {
          $.ajax({
            method: "POST",
            url: scripturl,
            data: {
              opt: "checkqueue",
              employee: employeeName,
            },
            success: function (response) {
              if (response.msg === "SUCCESS") {
                resolve(response.status);
              } else {
                reject(new Error(response.error || "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏¥‡∏ß‡πÑ‡∏î‡πâ"));
              }
            },
            error: function (err) {
              reject(err);
            },
          });
        });
      }

      // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏¥‡∏ß
      function showQueueStatus(status) {
        let message = "";

        if (status.inQueue) {
          message = `
            <div class="queue-info">
              <div><strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏¥‡∏ß‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:</strong> ${
                status.queueNumber
              }</div>
              <div><strong>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏ô‡∏Ñ‡∏¥‡∏ß:</strong> ${status.position} ‡∏à‡∏≤‡∏Å ${
            status.total
          }</div>
              <div><strong>‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì:</strong> ${
                status.estimated
              } ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</div>
              <div class="progress mt-2">
                <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" 
                    style="width: ${Math.round(
                      100 - (status.position / status.total) * 100
                    )}%" 
                    aria-valuenow="${
                      status.position
                    }" aria-valuemin="0" aria-valuemax="${status.total}"></div>
              </div>
            </div>
          `;
        } else {
          message = "‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ñ‡∏¥‡∏ß";
        }

        $("#message").html(message);
        document.getElementById("message").className = "alert alert-info";
      }

      // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞
      function pollQueueStatus(employeeName) {
        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ global ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ
        window.queuePollInterval = setInterval(async () => {
          try {
            const status = await checkQueueStatus(employeeName);

            // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ñ‡∏¥‡∏ß‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß
            if (!status.inQueue) {
              clearInterval(window.queuePollInterval);
              // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡πà‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß
              $("#message").html("‡∏Å‡∏≤‡∏£‡∏•‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß");
              document.getElementById("message").className =
                "alert alert-success";
              setTimeout(() => {
                // ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
                location.reload();
              }, 2000);
              return;
            }

            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏ñ‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏¥‡∏ß
            showQueueStatus(status);

            // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡πÅ‡∏£‡∏Å‡πÉ‡∏ô‡∏Ñ‡∏¥‡∏ß ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ö‡πà‡∏≠‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô
            if (status.position === 1) {
              clearInterval(window.queuePollInterval);
              window.queuePollInterval = setInterval(async () => {
                const updatedStatus = await checkQueueStatus(employeeName);
                if (!updatedStatus.inQueue) {
                  clearInterval(window.queuePollInterval);
                  // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡πà‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß
                  $("#message").html("‡∏Å‡∏≤‡∏£‡∏•‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß");
                  document.getElementById("message").className =
                    "alert alert-success";
                  setTimeout(() => {
                    // ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
                    location.reload();
                  }, 2000);
                } else {
                  showQueueStatus(updatedStatus);
                }
              }, 500); // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å 0.5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏Å‡∏•‡πâ‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏¥‡∏ß‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
            }
          } catch (error) {
            console.error("Error polling queue:", error);
          }
        }, 2000); // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
      }

      // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Clock In
      async function ClockIn() {
        event.preventDefault();
        // ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á GPS ‡∏à‡∏≤‡∏Å getlocation()

        var employee = document.getElementById("employee").value;
        var userinfo = document.getElementById("userinfo").value;

        if (employee !== "") {
          $("#message").html(
            "<span class='spinner-border spinner-border-sm text-primary'></span> ‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà ...!"
          );

          // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
          if (!profile) {
            console.log("No profile available, using default values");
            profile = {
              name: "Guest User",
              picture: "https://via.placeholder.com/150",
            };
          }

          console.log("Using profile for ClockIn:", profile);

          // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô clockin ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏¥‡∏ß
          $.ajax({
            method: "POST",
            url: scripturl,
            data: {
              opt: "clockin",
              employee,
              userinfo,
              lat: gps[0],
              lon: gps[1],
              line_name: profile.name,
              line_picture: profile.picture,
            },
            success: function (res) {
              console.log("ClockIn response:", res);

              // ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ñ‡∏¥‡∏ß
              if (res.msg === "QUEUED") {
                // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏¥‡∏ß
                const queueMessage = `
                  <div class="queue-info">
                    <div class="text-center mb-2"><strong>‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏¥‡∏ß‡πÅ‡∏•‡πâ‡∏ß</strong></div>
                    <div><strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏¥‡∏ß‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:</strong> ${
                      res.queueNumber
                    }</div>
                    <div><strong>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏ô‡∏Ñ‡∏¥‡∏ß:</strong> ${res.position} ‡∏à‡∏≤‡∏Å ${
                  res.total
                }</div>
                    <div><strong>‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì:</strong> ${
                      res.estimated
                    } ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</div>
                    <div class="progress mt-2">
                      <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" 
                          style="width: ${Math.round(
                            100 - (res.position / res.total) * 100
                          )}%" 
                          aria-valuenow="${
                            res.position
                          }" aria-valuemin="0" aria-valuemax="${
                  res.total
                }"></div>
                    </div>
                  </div>
                `;

                $("#message").html(queueMessage);
                document.getElementById("message").className =
                  "alert alert-info";

                // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞
                pollQueueStatus(employee);
              } else if (res.msg === "PROCESSING") {
                // ‡∏ñ‡πâ‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•
                $("#message").html(
                  `<span class='spinner-border spinner-border-sm text-primary'></span> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...`
                );
                document.getElementById("message").className =
                  "alert alert-info";

                // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞
                pollQueueStatus(employee);
              } else if (res.msg === "SUCCESS") {
                // ‡∏ñ‡πâ‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏Ñ‡∏¥‡∏ß)
                $.ajax({
                  method: "POST",
                  url: scripturl,
                  data: {
                    opt: "sendnotify",
                    message: res.message,
                    token: res.token,
                    lat: gps[0],
                    lon: gps[1],
                  },
                });

                setTimeout(() => {
                  var message =
                    res.employee + "<br> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏°‡∏≤ " + res.return_date;
                  $("#message").html(message);
                  document.getElementById("message").className =
                    "alert alert-primary";
                  clearForm();
                }, 500);
              } else {
                var message = res.employee + " " + res.msg;
                $("#message").html(message);
                document.getElementById("message").className =
                  "alert alert-warning";
                clearForm();
              }
            },
            error: function (err) {
              console.error("ClockIn error:", err);
              $("#message").html("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå");
              document.getElementById("message").className =
                "alert alert-danger";
            },
          });
        } else {
          //‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠
          $("#message").html("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô ...!");
          document.getElementById("message").className =
            "alert alert-warning text-danger";
          clearForm();
        }
      }

      // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Clock Out
      async function ClockOut() {
        event.preventDefault();
        // ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á GPS ‡∏à‡∏≤‡∏Å getlocation()
        var employee = document.getElementById("employee").value;

        if (employee !== "") {
          $("#message").html(
            "<span class='spinner-border spinner-border-sm text-warning'></span> ‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà ...!"
          );

          // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
          if (!profile) {
            console.log("No profile available, using default values");
            profile = {
              name: "Guest User",
              picture: "https://via.placeholder.com/150",
            };
          }

          console.log("Using profile for ClockOut:", profile);

          // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô clockout ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏¥‡∏ß
          $.ajax({
            method: "POST",
            url: scripturl,
            data: {
              opt: "clockout",
              employee,
              lat: gps[0],
              lon: gps[1],
              line_name: profile.name,
              line_picture: profile.picture,
            },
            success: function (res) {
              console.log("ClockOut response:", res);

              // ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ñ‡∏¥‡∏ß
              if (res.msg === "QUEUED") {
                // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏¥‡∏ß
                const queueMessage = `
                  <div class="queue-info">
                    <div class="text-center mb-2"><strong>‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏¥‡∏ß‡πÅ‡∏•‡πâ‡∏ß</strong></div>
                    <div><strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏¥‡∏ß‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:</strong> ${
                      res.queueNumber
                    }</div>
                    <div><strong>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏ô‡∏Ñ‡∏¥‡∏ß:</strong> ${res.position} ‡∏à‡∏≤‡∏Å ${
                  res.total
                }</div>
                    <div><strong>‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì:</strong> ${
                      res.estimated
                    } ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</div>
                    <div class="progress mt-2">
                      <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" 
                          style="width: ${Math.round(
                            100 - (res.position / res.total) * 100
                          )}%" 
                          aria-valuenow="${
                            res.position
                          }" aria-valuemin="0" aria-valuemax="${
                  res.total
                }"></div>
                    </div>
                  </div>
                `;

                $("#message").html(queueMessage);
                document.getElementById("message").className =
                  "alert alert-info";

                // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞
                pollQueueStatus(employee);
              } else if (res.msg === "PROCESSING") {
                // ‡∏ñ‡πâ‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•
                $("#message").html(
                  `<span class='spinner-border spinner-border-sm text-warning'></span> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...`
                );
                document.getElementById("message").className =
                  "alert alert-info";

                // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞
                pollQueueStatus(employee);
              } else if (res.msg === "SUCCESS") {
                // ‡∏ñ‡πâ‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏Ñ‡∏¥‡∏ß)
                $.ajax({
                  method: "POST",
                  url: scripturl,
                  data: {
                    opt: "sendnotify",
                    message: res.message,
                    token: res.token,
                    lat: gps[0],
                    lon: gps[1],
                  },
                });

                setTimeout(() => {
                  var message =
                    res.employee + "<br> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏•‡∏±‡∏ö " + res.return_date;
                  $("#message").html(message);
                  document.getElementById("message").className =
                    "alert alert-primary";
                  clearForm();
                }, 500);
              } else {
                var message = res.employee + " " + res.msg;
                $("#message").html(message);
                document.getElementById("message").className =
                  "alert alert-warning";
                clearForm();
              }
            },
            error: function (err) {
              console.error("ClockOut error:", err);
              $("#message").html("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå");
              document.getElementById("message").className =
                "alert alert-danger";
            },
          });
        } else {
          //‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠
          $("#message").html("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô ...!");
          document.getElementById("message").className =
            "alert alert-warning text-danger";
          clearForm();
        }
      }

      // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤
      $(window).on("beforeunload", function () {
        if (window.queuePollInterval) {
          clearInterval(window.queuePollInterval);
        }
      });

      // ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏≤‡∏á‡∏†‡∏π‡∏°‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå - ‡∏•‡∏∞‡∏ï‡∏¥‡∏à‡∏π‡∏î/‡∏•‡∏≠‡∏á‡∏à‡∏¥‡∏à‡∏π‡∏î
      function getlocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            showPosition,
            getLocationFromApi
          );
        } else {
          console.log("Geolocation is not supported by this browser.");
          // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ GPS ‡πÑ‡∏î‡πâ
          gps = [13.7563, 100.5018]; // ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø)
        }
      }

      function showPosition(position) {
        var lat = position.coords.latitude;
        var lon = position.coords.longitude;
        gps = [lat, lon];
        console.log("üöÄ ~ gps:", gps);
        console.log("Latitude: " + lat + " Longitude: " + lon);
      }

      function getLocationFromParameter() {
        var url = new URL(window.location.href);
        var lat = url.searchParams.get("lat");
        var lon = url.searchParams.get("lon");
        gps = [lat, lon];
        console.log("Latitude: " + lat + " Longitude: " + lon);
      }

      function getLocationFromApi() {
        $.getJSON("https://ipapi.co/json/", function (data) {
          var lat = data.latitude;
          var lon = data.longitude;
          geolocation = [lat, lon];
          gps = [lat, lon];
          console.log("Latitude: " + lat + " Longitude: " + lon);
          return geolocation;
        }).fail(function () {
          console.log("Failed to get location from API, using default");
          gps = [13.7563, 100.5018]; // ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø)
        });
      }

      // ‡∏•‡πâ‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
      function clearForm() {
        setTimeout(function () {
          document.getElementById("message").innerText = owner;
          document.getElementById("message").className = "alert msgBg";
          document.getElementById("myForm").reset();
        }, 5000);
      }

      // ‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤‡∏î‡∏¥‡∏à‡∏¥‡∏ï‡∏≠‡∏•
      function showTime() {
        var date = new Date();
        var h = date.getHours(); // 0 - 23
        var m = date.getMinutes(); // 0 - 59
        var s = date.getSeconds(); // 0 - 59
        var dot = (document.textContent = ".");

        if (s % 2 == 1) {
          dot = document.textContent = ".";
        } else {
          dot = document.textContent = "\xa0";
        }

        h = h < 10 ? "0" + h : h;
        m = m < 10 ? "0" + m : m;
        s = s < 10 ? "0" + s : s;

        var time = h + ":" + m + ":" + s + "" + dot;
        document.getElementById("MyClockDisplay").innerText = time;
        document.getElementById("MyClockDisplay").textContent = time;

        setTimeout(showTime, 1000);
      }

      showTime();
    </script>
    <script
      charset="utf-8"
      src="https://static.line-scdn.net/liff/edge/2/sdk.js"
    ></script>
  </body>
</html>
